- has_jammit_js :question_editor, :pickup_editor

- form.inputs :name => "Mission Details" do
  
  = form.input :name
  
  - has_ckeditor
  = form.input :description, :input_html => {:rows => 5}, :wrapper_html => {:class => 'ckeditor'}
  
  = form.input :occurs_at, :hint => "When is the event?"
  
  = form.input :user, :collection => User.for_select
  
  = form.input :organisation
  
  = form.input :state_event, :as => :select, :collection => form.object.state_events_for_select
  
- form.inputs :name => "Mission Address" do
  = render_address_fields form
  
%h3 Available Pickups
%p.actions= link_to 'Add another pickup', '#', :class => 'add-pickup-link'
- form.object.mission_pickups.build
- form.fields_for :mission_pickups do |mpf|
  = render :partial => 'pickup_form', :object => mpf
  
  
  
%h3 Extra Questions for Mission
%p.actions= link_to 'Add another question', '#', :class => 'add-question-link'
- form.object.questions.build
- form.fields_for :questions do |qf|
  = render :partial => 'question_form', :object => qf
  
- content_for :extra_head do
  :javascript
    BHM.Admin.QuestionEditor.template = #{render_new_question_form(form).to_json};
    BHM.Admin.PickupEditor.template   = #{render_new_pickup_form(form).to_json}